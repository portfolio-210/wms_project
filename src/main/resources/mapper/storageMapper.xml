<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wms_project.mapper.StorageMapper">

    <!-- 등록 -->
    <insert id="insert1" parameterType="wms_project.dto.StorageDTO">
        INSERT INTO storage (scode, sspot, sname, spost, saddress1, saddress2, smname, smhp, suse, mid, sdeleted, sdate)
        VALUES (#{scode}, #{sspot}, #{sname}, #{spost}, #{saddress1}, #{saddress2}, #{smname}, #{smhp}, #{suse}, #{mid},
                #{sdeleted}, NOW())
    </insert>

    <!-- 중복체크(창고코드) -->
    <select id="checkCode" resultType="int">
        SELECT COUNT(*)
        FROM storage
        WHERE scode = #{scode}
    </select>

    <select id="searchall" parameterType="String" resultType="wms_project.dto.StorageDTO">

        select *
        from storage
        where sspot = #{mspot}

    </select>
	<select id="all" parameterType="String" resultType="wms_project.dto.StorageDTO">

		select * from storage where sname LIKE CONCAT('%', #{search}, '%')
               
	</select>


    <select id="getByID" parameterType="String" resultType="wms_project.dto.StorageDTO">

        select *
        from storage
        where scode = #{scode}

    </select>

    <update id="updateByID" parameterType="wms_project.dto.StorageDTO">

      update storage
      set
          sname = #{sname},
          spost = #{spost},
          saddress1 = #{saddress1},
          saddress2 = #{saddress2},
          smname = #{smname},
          smhp = #{smhp},
          suse = #{suse}
      where scode = #{scode}
    </update>
    
     <update id="deleteByID" parameterType="wms_project.dto.StorageDTO">

      update storage
      set sdeleted = 0
      where scode = #{scode}
    </update>
    
   <!-- 상품 입고 관련 spl문 -->
   
    <!-- 거래처 입력 시 거래처 코드 자동기입하기 위해 필요 -->
    <select id="getAcode" parameterType="String" resultType="String">
    SELECT acode
    FROM account
    WHERE acompany = #{acompany}
	</select>
    
    <insert id="insertStore" parameterType="wms_project.dto.ProductsDTO">
    INSERT INTO product (acompany, acode, pdcode, pdname, pdamount, sname, scode, pname, pddate)
    VALUES
	    <if test="acompany_0 != ''">
	         (#{acompany_0}, #{acode_0}, #{pdcode_0}, #{pdname_0}, #{pdamount_0}, #{sname_0}, #{scode_0}, #{pname_0}, #{pddate_0})
	    </if>
	    <if test="acompany_1 != ''">
	         ,(#{acompany_1}, #{acode_1}, #{pdcode_1}, #{pdname_1}, #{pdamount_1}, #{sname_1}, #{scode_1}, #{pname_1}, #{pddate_1})
	    </if>
	    <if test="acompany_2 != ''">
	         ,(#{acompany_2}, #{acode_2}, #{pdcode_2}, #{pdname_2}, #{pdamount_2}, #{sname_2}, #{scode_2}, #{pname_2}, #{pddate_2})
	    </if>
	    <if test="acompany_3 != ''">
	         ,(#{acompany_3}, #{acode_3}, #{pdcode_3}, #{pdname_3}, #{pdamount_3}, #{sname_3}, #{scode_3}, #{pname_3}, #{pddate_3})
	    </if>
	    <if test="acompany_4 != ''">
	         ,(#{acompany_4}, #{acode_4}, #{pdcode_4}, #{pdname_4}, #{pdamount_4}, #{sname_4}, #{scode_4}, #{pname_4}, #{pddate_4})
	    </if>
	    <if test="acompany_5 != ''">
	         ,(#{acompany_5}, #{acode_5}, #{pdcode_5}, #{pdname_5}, #{pdamount_5}, #{sname_5}, #{scode_5}, #{pname_5}, #{pddate_5})
	    </if>
	    <if test="acompany_6 != ''">
	         ,(#{acompany_6}, #{acode_6}, #{pdcode_6}, #{pdname_6}, #{pdamount_6}, #{sname_6}, #{scode_6}, #{pname_6}, #{pddate_6})
	    </if>
	    <if test="acompany_7 != ''">
	         ,(#{acompany_7}, #{acode_7}, #{pdcode_7}, #{pdname_7}, #{pdamount_7}, #{sname_7}, #{scode_7}, #{pname_7}, #{pddate_7})
	    </if>
	    <if test="acompany_8 != ''">
	         ,(#{acompany_8}, #{acode_8}, #{pdcode_8}, #{pdname_8}, #{pdamount_8}, #{sname_8}, #{scode_8}, #{pname_8}, #{pddate_8})
	    </if>
	    <if test="acompany_9 != ''">
	         ,(#{acompany_9}, #{acode_9}, #{pdcode_9}, #{pdname_9}, #{pdamount_9}, #{sname_9}, #{scode_9}, #{pname_9}, #{pddate_9})
	    </if>
	    <if test="acompany_10 != ''">
	         ,(#{acompany_10}, #{acode_10}, #{pdcode_10}, #{pdname_10}, #{pdamount_10}, #{sname_10}, #{scode_10}, #{pname_10}, #{pddate_10})
	    </if>
	    <if test="acompany_11 != ''">
	         ,(#{acompany_11}, #{acode_11}, #{pdcode_11}, #{pdname_11}, #{pdamount_11}, #{sname_11}, #{scode_11}, #{pname_11}, #{pddate_11})
	    </if>
	    <if test="acompany_12 != ''">
	         ,(#{acompany_12}, #{acode_12}, #{pdcode_12}, #{pdname_12}, #{pdamount_12}, #{sname_12}, #{scode_12}, #{pname_12}, #{pddate_12})
	    </if>
	    <if test="acompany_13 != ''">
	         ,(#{acompany_13}, #{acode_13}, #{pdcode_13}, #{pdname_13}, #{pdamount_13}, #{sname_13}, #{scode_13}, #{pname_13}, #{pddate_13})
	    </if>
	    <if test="acompany_14 != ''">
	         ,(#{acompany_14}, #{acode_14}, #{pdcode_14}, #{pdname_14}, #{pdamount_14}, #{sname_14}, #{scode_14}, #{pname_14}, #{pddate_14})
	    </if>
    </insert>
    
    
    
    
</mapper>
